<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Currency">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">

    <title>Currency</title>

    <link rel="icon" type="image/svg+xml"
        href="https://raw.githubusercontent.com/ivan-ska/converter/f393511646d14c250f0db9ce541ad6dde1b83b32/files/favicon.svg">

    <link rel="apple-touch-icon"
        href="https://raw.githubusercontent.com/ivan-ska/converter/f393511646d14c250f0db9ce541ad6dde1b83b32/files/icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400&family=Doto:wght@500;600&display=swap"
        rel="stylesheet">

    <link rel="manifest" href="manifest.json">

    <style>
        html {
            background-color: #FFFFFF !important;
        }

        :root {
            --bg-page: #FFFFFF;
            --bg-element: #F0F0F0;
            --border-color: #F0F0F0;
            --btn-color: #F0F0F0;
        }

        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Doto', sans-serif;
            background-color: var(--bg-page);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            min-height: 100dvh;
            padding: 20px;
            overflow: hidden;
        }

        @media (max-width: 600px) {
            body {
                align-items: flex-start;
                padding-top: 10dvh;
            }
        }

        .converter-card {
            width: 100%;
            min-width: 280px;
            max-width: 510px;
            display: flex;
            flex-direction: column;
        }

        .top-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 40px;
        }

        .header-block {
            background: var(--bg-element);
            padding: 20px 12px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid var(--bg-element);
        }

        .header-block h1 {
            font-size: 22px;
            margin: 0;
            font-weight: 600;
            text-transform: uppercase;
        }

        .date-text {
            font-size: 14px;
        }

        .ver-connectors-row {
            display: flex;
            gap: 6px;
        }

        .ver-con-wrapper {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .ver-con-wrapper img {
            height: 6px;
            width: auto;
        }

        .rates-row {
            display: flex;
            align-items: stretch;
        }

        .rate-card {
            background: var(--bg-element);
            flex: 1;
            padding: 16px 12px;
            border-radius: 6px;
            border: 2px solid var(--bg-element);
            display: flex;
            flex-direction: column;
        }

        .rate-card-header {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            margin-bottom: 12px;
            line-height: 1;
        }

        img.flag-round {
            border-radius: 50%;
        }

        .rate-card-header img {
            width: 14px;
            height: 14px;
            border: 1px solid var(--border-color);
        }

        .rate-card-value {
            font-family: 'DM Mono', monospace;
            font-size: 22px;
            letter-spacing: -0.03em;
            line-height: 1;
        }

        .hor-con-wrapper {
            width: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .hor-con-wrapper img {
            width: 6px;
            height: auto;
        }

        /* --- SECTION 2: INPUTS --- */
        .main-group {
            display: flex;
            flex-direction: column;
        }

        .currency-row {
            background: var(--bg-element);
            border-radius: 6px;
            padding: 20px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.2s;
            border: 2px solid var(--bg-element);
            cursor: text;
        }

        .currency-row:focus-within {
            background: #FFFFFF;
            border-color: var(--border-color);
        }

        .label-part {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 80px;
        }

        .label-part img {
            width: 20px;
            height: 20px;
            border: 1px solid var(--border-color);
        }

        .currency-code {
            font-size: 22px;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .input-part {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-grow: 1;
            justify-content: flex-end;
        }

        input[type=text] {
            background: transparent;
            border: none;
            outline: none;
            font-family: 'DM Mono', monospace;
            font-size: 22px;
            letter-spacing: -0.03em;
            text-align: right;
            width: 100%;
            padding: 0;
            color: #000000;
        }

        input::placeholder,
        input.is-zero {
            opacity: 0.4;
        }

        /* RESET BUTTON */
        .btn-reset {
            width: 30px;
            height: 30px;
            padding: 8px;
            border: none;
            border-radius: 4px;
            background: var(--btn-color);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.1s;
        }

        .btn-reset:active {
            background-image: linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));
        }

        .btn-reset img {
            width: 14px;
            height: 14px;
        }

        .connector-row-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .connector-row-wrapper img {
            width: 12px;
            height: auto;
        }
    </style>
</head>

<body>

    <div class="converter-card">
        <div class="top-group">
            <div class="header-block">
                <h1>Currency</h1>
                <div class="date-text" id="current-date">...</div>
            </div>
            <div class="ver-connectors-row">
                <div class="ver-con-wrapper"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-ver.svg">
                </div>
                <div class="ver-con-wrapper"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-ver.svg">
                </div>
                <div class="ver-con-wrapper"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-ver.svg">
                </div>
            </div>
            <div class="rates-row">
                <div class="rate-card">
                    <div class="rate-card-header"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-us.png"
                            class="flag-round"> <span>USD</span></div>
                    <div class="rate-card-value" id="rate-usd">...</div>
                </div>
                <div class="hor-con-wrapper"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-hor.svg">
                </div>
                <div class="rate-card">
                    <div class="rate-card-header"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-eu.png"
                            class="flag-round"> <span>EUR</span></div>
                    <div class="rate-card-value" id="rate-eur">...</div>
                </div>
                <div class="hor-con-wrapper"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-hor.svg">
                </div>
                <div class="rate-card">
                    <div class="rate-card-header"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-by.png"
                            class="flag-round"> <span>BYN</span></div>
                    <div class="rate-card-value" id="rate-byn">...</div>
                </div>
            </div>
        </div>

        <div class="main-group">
            <div class="currency-row" onclick="focusInput('PLN')">
                <div class="label-part"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-pl.png"
                        class="flag-round"><span class="currency-code">PLN</span></div>
                <div class="input-part">
                    <input type="text" id="PLN" placeholder="0" inputmode="decimal" oninput="validateAndCalc(this)"
                        class="is-zero">
                    <button class="btn-reset" onclick="resetValues(event)"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/82d1ada1c5805782c21a6419c05e7610b9aaf653/files/icons/ic-cross.svg"></button>
                </div>
            </div>
            <div class="connector-row-wrapper"><img
                    src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-ver.svg">
            </div>

            <div class="currency-row" onclick="focusInput('USD')">
                <div class="label-part"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-us.png"
                        class="flag-round"><span class="currency-code">USD</span></div>
                <div class="input-part">
                    <input type="text" id="USD" placeholder="0" inputmode="decimal" oninput="validateAndCalc(this)"
                        class="is-zero">
                    <button class="btn-reset" onclick="resetValues(event)"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/82d1ada1c5805782c21a6419c05e7610b9aaf653/files/icons/ic-cross.svg"></button>
                </div>
            </div>
            <div class="connector-row-wrapper"><img
                    src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-ver.svg">
            </div>

            <div class="currency-row" onclick="focusInput('EUR')">
                <div class="label-part"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-eu.png"
                        class="flag-round"><span class="currency-code">EUR</span></div>
                <div class="input-part">
                    <input type="text" id="EUR" placeholder="0" inputmode="decimal" oninput="validateAndCalc(this)"
                        class="is-zero">
                    <button class="btn-reset" onclick="resetValues(event)"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/82d1ada1c5805782c21a6419c05e7610b9aaf653/files/icons/ic-cross.svg"></button>
                </div>
            </div>
            <div class="connector-row-wrapper"><img
                    src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/cons/con-ver.svg">
            </div>

            <div class="currency-row" onclick="focusInput('BYN')">
                <div class="label-part"><img
                        src="https://raw.githubusercontent.com/ivan-ska/converter/b0ee605df62d1f17e6849df26764c3cecb04d1b1/files/flags/fl-by.png"
                        class="flag-round"><span class="currency-code">BYN</span></div>
                <div class="input-part">
                    <input type="text" id="BYN" placeholder="0" inputmode="decimal" oninput="validateAndCalc(this)"
                        class="is-zero">
                    <button class="btn-reset" onclick="resetValues(event)"><img
                            src="https://raw.githubusercontent.com/ivan-ska/converter/82d1ada1c5805782c21a6419c05e7610b9aaf653/files/icons/ic-cross.svg"></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const rates = {};
        const ids = ['PLN', 'USD', 'EUR', 'BYN'];

        fetch('https://open.er-api.com/v6/latest/PLN')
            .then(r => r.json())
            .then(data => {
                rates.PLN = 1;
                rates.USD = data.rates.USD;
                rates.EUR = data.rates.EUR;
                rates.BYN = data.rates.BYN;
                document.getElementById('rate-usd').innerText = (1 / rates.USD).toFixed(2);
                document.getElementById('rate-eur').innerText = (1 / rates.EUR).toFixed(2);
                document.getElementById('rate-byn').innerText = (1 / rates.BYN).toFixed(2);
                const d = new Date();
                const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
                document.getElementById('current-date').innerText = `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
            });

        function focusInput(id) { document.getElementById(id).focus(); }

        function validateAndCalc(el) {
            let val = el.value.replace(',', '.');
            val = val.replace(/[^0-9.]/g, '');
            if ((val.match(/\./g) || []).length > 1) {
                val = val.substr(0, val.lastIndexOf('.'));
            }
            el.value = val;
            updateOpacity();
            calculate(el.id, val);
        }

        function resetValues(event) {
            event.stopPropagation();
            ids.forEach(id => {
                document.getElementById(id).value = '';
            });
            updateOpacity();
        }

        function updateOpacity() {
            ids.forEach(id => {
                const el = document.getElementById(id);
                if (el.value === '' || parseFloat(el.value) === 0) {
                    el.classList.add('is-zero');
                } else {
                    el.classList.remove('is-zero');
                }
            });
        }

        function calculate(srcId, val) {
            if (!val || isNaN(parseFloat(val))) {
                ids.forEach(id => { if (id !== srcId) document.getElementById(id).value = ''; });
                updateOpacity();
                return;
            }
            const pln = parseFloat(val) / rates[srcId];
            ids.forEach(id => {
                if (id !== srcId) {
                    const res = pln * rates[id];
                    document.getElementById(id).value = Number.isInteger(res) ? res : parseFloat(res.toFixed(2));
                }
            });
            updateOpacity();
        }
    </script>
</body>

</html>
